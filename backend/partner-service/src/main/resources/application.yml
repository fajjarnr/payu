quarkus:
  application:
    name: partner-service
  http:
    port: 8089
  otel:
    service:
      name: partner-service
    exporter:
      otlp:
        endpoint: ${OTEL_ENDPOINT:http://localhost:4317}
    resource:
      attributes:
        - service.name=partner-service
        - service.version=1.0.0
  datasource:
    db-kind: postgresql
    username: postgres
    password: postgres # pragma: allowlist secret
    jdbc:
      url: jdbc:postgresql://localhost:5432/partnerdb
    health: true
    metrics: true
  hibernate-orm:
    database:
      generation: validate
      # Explicitly map entity packages to avoid persistence unit issues
      # Include both our entities and Kafka checkpoint entities
      packages: "id.payu.partner.domain,io.quarkus.smallrye.reactivemessaging.kafka"
    log:
      sql: false
  kafka:
    bootstrap-servers: localhost:9092
  smallrye-openapi:
    info-title: PayU Partner Service API
    info-version: 1.0.0
    info-description: API for managing external partners
  log:
    level: INFO
    category:
      "id.payu.partner":
        level: DEBUG
"%dev":
  quarkus:
    datasource:
      db-kind: h2
      jdbc:
        url: jdbc:h2:mem:devdb
      health: false
      metrics: false
    hibernate-orm:
      database:
        generation: drop-and-create
      packages: "id.payu.partner.domain,io.quarkus.smallrye.reactivemessaging.kafka"
"%test":
  quarkus:
    datasource:
      db-kind: h2
      jdbc:
        url: jdbc:h2:mem:testdb
      username: sa
      password:
      health: false
      metrics: false
    hibernate-orm:
      database:
        generation: drop-and-create
        dialect: org.hibernate.dialect.H2Dialect
      packages: "id.payu.partner.domain"
      log:
        sql: false
    # Completely disable SmallRye Reactive Messaging and Kafka checkpointing
    kafka:
      enabled: false
      devservices:
        enabled: false
    messaging:
      enabled: false
    smallrye:
      messaging:
        health:
          enabled: false
    # Disable reactive messaging
    mp:
      messaging:
        incoming:
          payment-events: not-used
        outgoing:
          payment-events: not-used
