# Test Configuration for Backoffice Service
#
# This file configures H2 database for unit and integration tests.
# H2 runs in-memory and doesn't require Docker.
#
# To run all tests (unit + integration):
#   ./mvnw test
#
# To run only unit tests (without Docker):
#   ./mvnw test -Dtest.exclude.integration=true
#
# To run only integration tests (with Docker/PostgreSQL):
#   ./mvnw test -Ddocker.enabled=true

# H2 Database Configuration (Unit Tests)
quarkus.datasource.db-kind=h2
quarkus.datasource.jdbc.url=jdbc:h2:mem:test;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;IGNORE_UNKNOWN_SETTINGS=TRUE
quarkus.datasource.username=sa
quarkus.datasource.password=

# Hibernate ORM Configuration
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.database.dialect=org.hibernate.dialect.H2Dialect
quarkus.hibernate-orm.sql-load-script=no-file
quarkus.hibernate-orm.log.sql=false

# Flyway Configuration
quarkus.flyway.migrate-at-start=false

# OIDC Configuration (Disabled for tests)
quarkus.oidc.enabled=false

# Logging Configuration
quarkus.log.category."org.hibernate.SQL".level=WARN
quarkus.log.category."id.payu.backoffice".level=DEBUG

# Test Configuration
quarkus.test.continuous-testing=disabled
