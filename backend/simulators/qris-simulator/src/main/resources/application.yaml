# QRIS Simulator Configuration
quarkus:
  application:
    name: qris-simulator
    version: 1.0.0

  # HTTP Server
  http:
    port: 8092
    cors:
      ~: true
      origins: "*"
      methods: GET,POST,PUT,DELETE,OPTIONS
      headers: "*"

  # Database
  datasource:
    db-kind: postgresql
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:postgres}
    jdbc:
      url: ${DB_URL:jdbc:postgresql://localhost:5432/qris_simulator}
      max-size: 10

  hibernate-orm:
    database:
      generation: drop-and-create
    log:
      sql: true

  # Health & Metrics
  smallrye-health:
    ui:
      enable: true

  micrometer:
    export:
      prometheus:
        path: /q/metrics

  # OpenTelemetry
  otel:
    exporter:
      otlp:
        endpoint: ${OTEL_ENDPOINT:http://localhost:4317}
    resource:
      attributes:
        - service.name=qris-simulator
        - service.version=1.0.0

  # Logging
  log:
    level: INFO
    category:
      "id.payu.simulator":
        level: DEBUG
    console:
      format: "%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n"

# Simulator Configuration
simulator:
  # Network latency simulation (milliseconds)
  latency:
    min: 50
    max: 300

  # Failure rate (percentage, 0-100)
  failure-rate: 2

  # QR Code settings
  qr:
    # QR expiry time in seconds
    expiry-seconds: 300
    # Image size in pixels
    image-size: 300
    # Image format
    format: PNG

  # Webhook configuration
  webhook:
    enabled: true
    delay-ms: 1000
    retry-count: 3

# Test Merchants (loaded on startup)
test-merchants:
  - merchant-id: "MCH001"
    merchant-name: "Warung Makan Sederhana"
    merchant-city: "JAKARTA"
    merchant-category: "FOOD_BEVERAGE"
    status: ACTIVE

  - merchant-id: "MCH002"
    merchant-name: "Toko Elektronik Jaya"
    merchant-city: "BANDUNG"
    merchant-category: "ELECTRONICS"
    status: ACTIVE

  - merchant-id: "MCH003"
    merchant-name: "Apotek Sehat Selalu"
    merchant-city: "SURABAYA"
    merchant-category: "HEALTH"
    status: ACTIVE

  - merchant-id: "MCH999"
    merchant-name: "Test Blocked Merchant"
    merchant-city: "UNKNOWN"
    merchant-category: "OTHER"
    status: BLOCKED
